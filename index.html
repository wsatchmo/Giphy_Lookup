<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Giphy Lookup WebApp</title>
    </head>
    <body>
        <form>
            <input id="new-button" type="text" style="height: 50px; width: 400px;">
            <input id="add-button" type="submit" value="Add Button">
        </form>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <div id="buttons-appear-here"></div>
        <div id="gifs-appear-here">
        </div>
        <script type="text/javascript">
        var startButtons = ["Black Hole", "Space", "Final Fantasy", "Horizon Zero Dawn", "Miyazaki", "Altered Carbon", "3D", "Cats", "Ancient Greece", "Lord of the Rings"];
        for (i = 0; i < startButtons.length; i++){
            $("#buttons-appear-here").append("<button data-name='" + startButtons[i] + "'>" + startButtons[i] + "</button>");
        }

        // * Adding buttons dynamically to the list of buttons based on what a user fills into a form
        $("#add-button").on("click", function(event){
            event.preventDefault();
            var inputGif = $("#new-button").val().trim();
            console.log(inputGif);
            $("#buttons-appear-here").append("<button data-name='" + inputGif + "'>" + inputGif + "</button>");
        });
            
        

        $(document).on("click", "button", function() {
            var dataName = $(this).attr("data-name");
            var queryURL = "https://api.giphy.com/v1/gifs/search?q=" + dataName + "&api_key=R8mbncGCeeAsgjOgcREdBP77Ar5lc6rh&limit=10";
            
            $.ajax({
                url: queryURL,
                method: "GET"
            }).then(function(response) {
                console.log(response);
                var results = response.data;
                for (var i = 0; i < results.length; i++) {
                    // Make a div with jQuery and store it in a variable named newDiv.
                    var newDiv = $("<div style='float: left; margin: 15px 5px 15px 5px;'>");
                    // Make a paragraph tag with jQuery and store it in a variable named p.
                    var p = $("<p>");
                    // Set the inner text of the paragraph to the rating of the image in results[i].
                    p.text("Rating: " + results[i].rating);
                    // Make an image tag with jQuery and store it in a variable named newImage.
                    var newImage = $("<img>");
                    // Set the image's src to results[i]'s fixed_height.url.
                    newImage.attr("src", results[i].images.fixed_height.url);
                    // Append the p variable to the newDiv variable.
                    newDiv.append(p);
                    // Append to the newDiv variable.
                    newDiv.append(newImage);
                    // Prepend the div to the element with an id of gifs-appear-here.
                    $("#gifs-appear-here").prepend(newDiv);
                }
            });
        });



        //THINGS YOU STILL NEED
        // * Make it so gifs show up in random order or so that the next 10 gifs are shown
        // * Ability to pause a gif
        // * Add a button that is 'click to copy gif url'

        </script>
    </body>
</html>